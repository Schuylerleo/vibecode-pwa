<!DOCTYPE html>
<html>
<head>
  <title>VibeCode PWA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    html,body{min-height:100vh;height:-webkit-fill-available}
    body{font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;background:#111;color:#fff;display:flex;flex-direction:column;position:relative;padding-bottom:env(safe-area-inset-bottom)}
    
    #header{padding:15px 20px 10px;background:rgba(0,0,0,0.9);border-bottom:1px solid #333;position:sticky;top:0;z-index:100}
    #status{padding:8px 12px;background:#0066ff;border-radius:20px;font-size:13px;display:flex;align-items:center;gap:8px}
    .spinner{display:inline-block;width:14px;height:14px;border:2px solid rgba(255,255,255,0.3);border-radius:50%;border-top-color:#fff;animation:spin 1s linear infinite}
    #tokens{font-size:11px;background:rgba(0,102,255,0.8);padding:6px 10px;border-radius:15px}
    
    #chat{flex:1;overflow-y:auto;padding:20px 20px 120px}
    .msg{padding:12px 16px;margin:8px 0;border-radius:18px;max-width:90%;word-wrap:break-word;box-shadow:0 2px 8px rgba(0,0,0,0.3)}
    .user{background:linear-gradient(135deg,#0066ff,#1e40af);margin-left:auto}
    .ai{background:#2a2a2a}
    
    #bottom{padding:20px 20px 20px;background:#111;position:sticky;bottom:0;display:flex;flex-direction:column;gap:12px}
    #input{display:flex;gap:10px;margin-bottom:12px}
    #msg{flex:1;padding:14px;border:2px solid #444;border-radius:25px;background:#222;color:#fff;font-size:16px;outline:none}
    #msg:focus{border-color:#0066ff;box-shadow:0 0 0 3px rgba(0,102,255,0.2)}
    
    .buttons{display:flex;gap:8px;flex-wrap:wrap;justify-content:center}
    button{padding:10px 14px;border:none;border-radius:20px;background:#0066ff;color:white;cursor:pointer;font-size:13px;font-weight:500;transition:all 0.2s;box-shadow:0 2px 8px rgba(0,102,255,0.3);flex:1;min-width:70px}
    button:hover{background:#0052cc;transform:translateY(-1px)}
    
    @keyframes spin{to{transform:rotate(360deg)}}
  </style>
</head>
<body>
  <div id="header">
    <div id="status"><span class="spinner"></span> VibeCode Live</div>
    <div id="tokens">Tokens: <span id="count">0</span></div>
  </div>
  
  <div id="chat">
    <div class="msg ai">üöÄ VibeCode PWA v1.0<br>‚úÖ UI Perfect ‚Ä¢ Spinners Working<br>üí° Try: "make glow navbar" or "idea todo app"</div>
  </div>
  
  <div id="bottom">
    <div id="input">
      <input id="msg" placeholder="glow navbar, login page, todo app...">
      <button onclick="sendMsg()">Send</button>
    </div>
    <div class="buttons">
      <button onclick="newChat()">üÜï New</button>
      <button onclick="setBot('pe')">üéØ Prompt</button>
      <button onclick="setBot('helper')">üí° Help</button>
      <button onclick="previewCode()">üëÅÔ∏è Preview</button>
    </div>
  </div>

  <script>
    let messages=[],tokens=0,currentBot='main',isProcessing=false,lastCode='';
    
    function addMsg(text,role='ai',status='normal'){
      const chat=document.getElementById('chat');
      const div=document.createElement('div');
      div.className=`msg ${role}`;
      if(status==='loading') div.innerHTML=`<span class="spinner"></span> ${text}`;
      else div.textContent=text;
      chat.appendChild(div);
      chat.scrollTop=chat.scrollHeight;
      if(role==='ai'&&status!=='loading') document.getElementById('count').textContent=tokens+=80;
    }
    
    function setBot(bot){
      currentBot=bot;
      addMsg(`${bot.toUpperCase()} Bot activated!`);
    }
    
    function sendMsg(){
      if(isProcessing) return;
      const input=document.getElementById('msg');
      const text=input.value.trim();
      if(!text) return;
      
      addMsg(text,'user');
      input.value='';
      isProcessing=true;
      addMsg(`${currentBot==='main'?'‚ú® MAIN':'üéØ '+currentBot.toUpperCase()} Bot...`,'ai','loading');
      
      setTimeout(()=>{
        document.querySelector('.msg:last-child').remove();
        let response;
        if(currentBot==='pe'){
          response=`üéØ PERFECT PROMPT:
"Build responsive ${text} PWA:
‚Ä¢ Mobile-first CSS
‚Ä¢ Dark theme
‚Ä¢ Smooth animations
‚Ä¢ Offline capable"`;
        }else if(currentBot==='helper'){
          response=`üí° ${text} TIPS:
‚Ä¢ CSS: grid/flexbox
‚Ä¢ Offline: service worker
‚Ä¢ Data: localStorage
‚Ä¢ Animations: transform`;
        }else{
          response=`‚ú® VibeCode Generated ${text}:

```html
<!DOCTYPE html>
<html>
<head>
<title>${text}</title>
<meta name="viewport" content="width=device-width">
<style>*{margin:0;padding:0;box-sizing:border-box}body{background:linear-gradient(45deg,#111,#0066ff);min-height:100vh;padding:20px;color:#fff;font-family:sans-serif;display:flex;align-items:center;justify-content:center;flex-direction:column}h1{font-size:clamp(2rem,10vw,4rem);background:linear-gradient(45deg,#fff,#0066ff);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:glow 2s infinite;text-shadow:0 0 30px rgba(0,102,255,0.5)}@keyframes glow{0%,100%{opacity:1;transform:scale(1)}50%{opacity:0.9;transform:scale(1.05)}}</style>
</head>
<body>
<h1>${text}</h1>
<p>‚úÖ VibeCode Generated PWA!</p>
</body>
</html>
```

üíæ Save ‚Üí Acode ‚Üí Live preview ready!`;
          lastCode=response;
        }
        addMsg(response);
        isProcessing=false;
        input.focus();
      },1800);
    }
    
    function newChat(){
      messages=[];tokens=0;
      document.getElementById('chat').innerHTML='<div class="msg ai">üöÄ New chat! Try "make glow navbar"</div>';
      document.getElementById('count').textContent='0';
    }
    
    function previewCode(){
      if(lastCode){
        const win=window.open('','_blank');
        win.document.write(lastCode.match(/```html[sS]*```/)[0].replace(/```html|```/g,''));
        win.document.close();
      }else addMsg('Generate code first!');
    }
    
    document.getElementById('msg').addEventListener('keypress',e=>{
      if(e.key==='Enter'&&!isProcessing) sendMsg();
    });
    document.getElementById('msg').focus();
  </script>
</body>
</html>
